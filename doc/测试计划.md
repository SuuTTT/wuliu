# 测试计划

## 1. 介绍：
本测试计划旨在全面评估模拟退火算法在调配问题上的性能。该测试将通过单元测试、集成测试、系统测试和性能测试来对算法的有效性、鲁棒性和性能进行评估。

## 2. 测试策略：
    * 单元测试：对算法的各个组件进行独立的、隔离的测试，确保每个部分都按照预期工作。
    * 集成测试：在单元测试的基础上，测试算法的组件在一起工作时的行为，以确保整体协调性。
    * 系统测试：在系统级别对算法进行测试，验证算法是否能在各种可能的使用场景下工作。
    * 性能测试：评估算法的运行时间和资源使用，以确定其在实际应用中的性能。

## 3. 测试用例：

    * 单元测试：
        * 用例1：验证`init_solution`函数的初始化情况。文件：`test_SA_init.py`。输入：初始解决方案、温度等参数，预期输出：有效的初始化状态，检查方法：检查返回的状态是否符合预期。
        * 用例2：测试`generate_neighbor`函数是否正确生成邻居解决方案。文件：`test_SA_gen_neighbour.py`。输入：当前解决方案，预期输出：有效的邻居解决方案，检查方法：验证生成的邻居解决方案是否满足预期。
        * 用例3：验证`init_solution`函数在存在时间冲突或库存不足时的行为。文件：`test_SA_init_with_conflict.py`。输入：特定的初始解决方案，预期输出：正确处理冲突的状态，检查方法：检查函数是否能正确处理冲突。

    * 集成测试：
        * 用例1：测试整个模拟退火算法流程。文件：`test_SA_full_process.py`。输入：一个含有多个订单的数据集，预期输出：每个订单的最优调配策略，检查方法：手动验证每个订单的调配策略是否为最优。

    * 系统测试：
        * 用例1：模拟大量订单的情况，文件：`test_SA_system_large_orders.py`。输入：一个大规模的订单数据集，预期输出：系统能正确处理并返回结果，检查方法：通过比较返回结果和预期结果来验证系统的正确性。

    * 性能测试：
        * 用例1：衡量模拟退火算法的运行时间，文件：`test_SA_performance_runtime.py`。输入：一个大规模的订单数据集，预期输出：算法的运行时间，检查方法：使用计时器来测量运行时间。
        * 用例2：测量模拟退火算法的资源使用情况，文件：`test_SA_performance_resources.py`。输入：一个大规模的订单数据集，预期输出：CPU和内存的使用情况，检查方法：使用系统监视工具来测量资源使用情况。

## 用例其之一

有两个订单分别需要从两个不同的仓库中调配商品。这两个订单的商品数量要求不同，而每个仓库中的商品库存也不同。我们需要考虑如何在满足订单商品数量要求的前提下，最小化总的调配成本（出库成本 + 运输成本）。

假设订单1需要10个商品A，订单2需要14个商品B。仓库1中商品A的库存为12个，商品B的库存为15个；仓库2中商品A的库存为9个，商品B的库存为6个。为了最小化调配成本，我们应该首先考虑使用库存足够的仓库来满足订单需求。

对于订单1，由于两个仓库中都有足够的商品A，我们需要比较两个仓库的调配成本。假设仓库1的调配成本为6.0，仓库2的调配成本为8.0，为了最小化总的调配成本，我们应该选择从仓库1中调配商品A来满足订单1的需求。

对于订单2，只有仓库1中的商品B的库存足够。所以我们应该选择从仓库1中调配商品B来满足订单2的需求。

请注意，上述的分析是基于给定的测试数据进行的，并且假设调配成本不依赖于调配的商品数量。在实际情况中，调配成本可能会随着调配的商品数量的增加而增加。此外，还需要考虑其他的约束条件，比如订单的最晚完成时间，商品的最短保存期限等。

```json
# 测试数据
request_data = {
    "Spdd": [
        {
            "ddnm": "order001",
            "qynm": "company001",
            "spnm": "AUX",
            "sl": 10.0,
            "lg": "kg",
            "zwdpwcsj": "2023-06-30T00:00:00Z",
            "ckdata": [
                {
                    "cknm": "WH1",
                    "pfwhnm": "grid001",
                    "yscb": 6.0,
                    "jd": 117.3,
                    "wd": 39.9
                },
                {
                    "cknm": "WH2",
                    "pfwhnm": "grid002",
                    "yscb": 8.0,
                    "jd": 116.4,
                    "wd": 39.9
                }
            ]
        },
        {
            "ddnm": "order002",
            "qynm": "company002",
            "spnm": "B",
            "sl": 20.0,
            "lg": "kg",
            "zwdpwcsj": "2023-07-01T00:00:00Z",
            "ckdata": [
                {
                    "cknm": "WH1",
                    "pfwhnm": "grid001",
                    "yscb": 6.0,
                    "jd": 117.3,
                    "wd": 39.9
                },
                {
                    "cknm": "WH2",
                    "pfwhnm": "grid002",
                    "yscb": 8.0,
                    "jd": 116.4,
                    "wd": 39.9
                }
            ]
        }
    ],
}
```